<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - NeRuaD Music Platform</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/profile.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body class="text-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="../../index.html">NeRuaD</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#profileNav" aria-controls="profileNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="profileNav">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="../../index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="favourite.html">Favourites</a></li>
                    <li class="nav-item"><a class="nav-link active" href="profile.html">Profile</a></li>
                </ul>
                
                <div class="btn-group">
                    <a class="btn btn-outline-secondary text-light" href="login.html">Login</a>
                    <a class="btn btn-warning" href="register.html">Sign Up</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="content" style="min-height: calc(100vh - 200px); padding-bottom: 90px;">
        <div class="container profile-container">
            <!-- Profile Header -->
            <div class="profile-header">
                <div class="profile-avatar-section">
                    <div class="profile-avatar" id="profileAvatar">
                        <span class="avatar-initials">NU</span>
                        <button class="avatar-edit-btn" id="editAvatarBtn" title="Change avatar">üì∑</button>
                    </div>
                    <div class="profile-info">
                        <h2 id="profileName">Default User</h2>
                        <p class="profile-email" id="profileEmail"></p>
                        <p class="profile-member-since">Member since November 2025</p>
                    </div>
                </div>
                <div class="profile-actions">
                    <button class="btn btn-warning" id="editProfileBtn">‚úèÔ∏è Edit Profile</button>
                    <button class="btn btn-outline-secondary" id="settingsBtn">‚öôÔ∏è Settings</button>
                </div>
            </div>

            <!-- Statistics Section -->
            <div class="profile-stats-section">
                <h3 class="section-title">Your Music Stats</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üéµ</div>
                        <div class="stat-value" id="totalTracks">0</div>
                        <div class="stat-label">Favorite Tracks</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìã</div>
                        <div class="stat-value" id="totalPlaylists">0</div>
                        <div class="stat-label">Playlists Created</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚è±Ô∏è</div>
                        <div class="stat-value" id="listeningTime">0h</div>
                        <div class="stat-label">Listening Time</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-value" id="averageRating">0.0</div>
                        <div class="stat-label">Average Rating</div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="profile-section">
                <h3 class="section-title">Recent Activity</h3>
                <div class="activity-list" id="activityList">
                    <div class="activity-item">
                        <div class="activity-icon">üéµ</div>
                        <div class="activity-content">
                            <p class="activity-text">Added "Daily Mix 1" to favorites</p>
                            <p class="activity-time">2 hours ago</p>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">‚≠ê</div>
                        <div class="activity-content">
                            <p class="activity-text">Rated "Chill Vibes" 5 stars</p>
                            <p class="activity-time">5 hours ago</p>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">üìã</div>
                        <div class="activity-content">
                            <p class="activity-text">Created new playlist "My Favorites"</p>
                            <p class="activity-time">1 day ago</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Favorite Genres -->
            <div class="profile-section">
                <h3 class="section-title">Favorite Genres</h3>
                <div class="genre-tags" id="favoriteGenres">
                    <span class="genre-tag">Pop</span>
                    <span class="genre-tag">Electronic</span>
                    <span class="genre-tag">Chill</span>
                    <span class="genre-tag">Rock</span>
                </div>
            </div>

            <!-- Account Settings Section (Hidden by default) -->
            <div class="profile-section settings-section" id="settingsSection" style="display: none;">
                <h3 class="section-title">Account Settings</h3>
                <div class="settings-grid">
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Email Notifications</h4>
                            <p>Receive updates about new music and features</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="emailNotifications" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Auto-Play Next Track</h4>
                            <p>Automatically play the next track when one finishes</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="autoPlay" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Show Explicit Content</h4>
                            <p>Display tracks with explicit content warnings</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="explicitContent">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Private Profile</h4>
                            <p>Hide your activity from other users</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="privateProfile">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                <div class="danger-zone">
                    <h4>Danger Zone</h4>
                    <button class="btn btn-outline-danger" id="deleteAccountBtn">Delete Account</button>
                </div>
            </div>

            <!-- Edit Profile Modal -->
            <div class="modal-overlay" id="editProfileModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Edit Profile</h3>
                        <button class="modal-close" id="closeEditModal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form id="editProfileForm">
                            <div class="form-group">
                                <label for="editName">Full Name</label>
                                <input type="text" id="editName" class="form-control bg-dark text-light" value="Default User">
                            </div>
                            <div class="form-group">
                                <label for="editEmail">Email</label>
                                <input type="email" id="editEmail" class="form-control bg-dark text-light" value="user@NeRuaD-music.com">
                            </div>
                            <div class="form-group">
                                <label for="editBio">Bio</label>
                                <textarea id="editBio" class="form-control bg-dark text-light" rows="3" placeholder="Tell us about yourself..."></textarea>
                            </div>
                            <div class="modal-actions">
                                <button type="button" class="btn btn-secondary" id="cancelEditBtn">Cancel</button>
                                <button type="submit" class="btn btn-warning">Save Changes</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Avatar Upload Modal -->
            <div class="modal-overlay" id="avatarModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Change Avatar</h3>
                        <button class="modal-close" id="closeAvatarModal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="avatar-upload-section">
                            <p>Choose a color for your avatar:</p>
                            <div class="color-picker">
                                <button class="color-option" data-color="#E8FF8A" style="background: #E8FF8A;"></button>
                                <button class="color-option" data-color="#FF6B6B" style="background: #FF6B6B;"></button>
                                <button class="color-option" data-color="#4ECDC4" style="background: #4ECDC4;"></button>
                                <button class="color-option" data-color="#45B7D1" style="background: #45B7D1;"></button>
                                <button class="color-option" data-color="#96CEB4" style="background: #96CEB4;"></button>
                                <button class="color-option" data-color="#FECA57" style="background: #FECA57;"></button>
                                <button class="color-option" data-color="#FF9FF3" style="background: #FF9FF3;"></button>
                                <button class="color-option" data-color="#54A0FF" style="background: #54A0FF;"></button>
                            </div>
                            <div class="modal-actions">
                                <button type="button" class="btn btn-secondary" id="cancelAvatarBtn">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-light border-top border-secondary mt-auto">
        <div class="container py-4">
            <div class="row g-3">
                <div class="col-12 col-md-4">
                    <h5>NeRuaD</h5>
                    <div id="datetime-container"></div>
                    <div class="feature-box">
                        <button id="open-popup-btn" class="feature-btn">Subscribe to our Newsletter</button>
                    </div>
                </div>
                <div class="col-12 col-md-8">
                    <div class="accordion-item">
                        <button class="accordion-header w-100">How do I create a playlist?</button>
                        <div class="accordion-content"><p>To create a playlist, navigate to the 'My Playlists' section and click the 'New Playlist' button. You can then add tracks by searching for them and clicking the 'Add to Playlist' icon.</p></div>
                    </div>
                    <div class="accordion-item">
                        <button class="accordion-header w-100">Can I use this platform offline?</button>
                        <div class="accordion-content"><p>Offline listening is a premium feature. Subscribers can download their favorite tracks and playlists to listen without an internet connection.</p></div>
                    </div>
                    <div class="accordion-item">
                        <button class="accordion-header w-100">How is my data protected?</button>
                        <div class="accordion-content"><p>We take your privacy seriously. All user data is encrypted and stored securely. We do not share your personal information with third parties without your consent. For more details, please review our Privacy Policy.</p></div>
                    </div>
                </div>
            </div>

            <div id="popup-overlay">
                <div class="popup-content">
                    <span id="close-popup-btn">&times;</span>
                    <h3>Subscribe Now</h3>
                    <p>Get the latest music news and updates directly in your inbox.</p>
                    <form>
                        <input type="email" placeholder="Enter your email" required>
                        <button type="submit" class="feature-btn">Subscribe</button>
                    </form>
                </div>
            </div>
            <div class="pt-3">Ruslan Bolatbekuly, Nurkhan Orazbay</div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/favorites-manager.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/shared-ux.js"></script>
    <script src="../js/profile.js"></script>
</body>
</html>
